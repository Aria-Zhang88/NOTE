## R语言日常学习

| 名称      |R语言日常学习         | 
| ------------- |:-------------:| 
| 参与者1号可能也是最后一号     | 赵晓繁 | 

>今天和慧娟姐一起吃饭的时候，慧娟姐说到“哪有什么胜利可言，坚持就是一切”。突然感觉这句话就是最近的写照啊，哈哈。
一直在拖着不肯学R语言，就像小康老师说的，非要等到最后的时刻才行。感觉可不能这样下去了，**主要是到用的时候这个东西一时半会学不会啊**。
所以郑重决定（可能自己不督促自己或者没有人督促又会郑重反悔吧）要好好地尽快地学习一下R语言。

*前言*：
1. 主要根据小康老师的PDF文档学习的
2. 里面内容均为个人后续理解，可能有不对的地方，各种求共同学习。
3. 该文档主要为了加深记忆以及方便复习，毕竟我只有七秒钟记忆。

### 20170330 今日主要学习内容*dplyr包*

 `library(dplyr)
df <- data.frame(color=c("blue","black","blue","blue","black"), value=1:5)
tbl <- tbl_df(df)
filter(tbl, color=="blue")`

这里的tbl_df是为了让数据文件更小一些，仅有的认知资源记得老师上课时这么讲的。
这一步主要是用来选取数据的，比如分为控制组和实验组，我就想要控制组的数据，谁还不是个笛宝儿了。
**注意**filter函数里面是俩等于号

* `filter(tbl, value%in%c(1, 4)`
表示选出value=1OR4的值，为什么放俩百分号放个in？
select函数也是筛选数据.不过select是通过名字来选变量.filter是根据准则选择观测值.在select函数里,你可以选择color,可以对变量进行重命名.
rename函数可以实现重新命名且不删除数据.

* arrange函数就是一个排序函数。突然想到在excel里运行大几千个数据时内心的哪种绝望，插图片就免了，自行脑补。
arrange(表格,你想排序的变量)即可升序排列变量.`arrange(表格,desc(你想排序的变量))`(突然感觉写成中文更容易理解)即可降序排列函数.还可以套着select函数变出花来,小康老师那个附录里有.
当然,你也可以对两个变量进行排序.arrange(名称，变量1，desc（变量2））的意思是先对变量1进行升序排列，再在变量1相同的组内，对变量2进行降序排列。

* mutate(）函数主要是为了增加变量。例如，你想算下A和B的乘积，那么就可以`mutate（表格名称，A*B)`。

* transmute()是剔除变量的，也可以顺便生成新的变量。例如，`transmute(表格名称，A，B*2）`含义就是剔除除A以外的变量，生成一个B*2的新变量。

* `summarise函数`是将多个值汇总为一个值。求个最大值最小值平均值啥的。但是我一直运行出现错误。下次再试。今天要回宿舍了。比心。
### 20170404 dplyr的练习和reshape2包的使用

>严重反思自己放个假就不知道学习了.今日学习积极主要原因在于,看了一天论文,实在看不下去了.遂,R语言.

上面提到的`summarise`函数，是因为我打错了标点符号,所以运行出现错误.用mtcars_tbl的数据来举例，`summarise(mtcars_tbl, min = min(mpg), max = max(mpg), mean = mean(mpg))`意识是在该表格汇总,mpg的最小值、最大值、平均值是多少.


#### PDF的57页练习。

`x1 <- rnorm(1000, 5, 2)`从均值为5,标准差为2的正态分布中随机抽取1000个数

`x2 <- sample(x1, 100, replace = FALSE)`从x1中不放回抽取100个数,组成x2样本.

`x3 <- log(x2)`对x2样本取对数,我统计学的不是很好,一直不知道为啥要取对数.

`boxplot(x3, col = "blue")`画一个颜色为忧郁的蓝色的箱型图.

`rnorm(1000, 5, 2) %>% sample( 100, replace = FALSE)  %>% log  %>% boxplot( col = "blue")`当然,也可以采用%>%这种管道式的操作方式,让整个代码连贯起来,打起来也很顺溜.

#### reshape2包的使用

reshape2包的使用主要是为了将宽格式的数据转换为长格式（窄格式）。个人觉得，在excel里这种转换也很痛苦，我们要学会利用工具。哈哈。
运用reshape2的包之前,需要了解宽格式和长格式的数据.宽格式是我们常见的格式.如下图.

| person  |grade  | score |
| --------- |:--------:| :-----:| 
| 王二狗   | 2 | 71 |
| 李三熊   | 2 | 72 |
| 王小芳   | 1 | 75 |

但是在R语言里,许多函数都要用长格式,如下图.

| person  |variable  | value |
| ------- |:--------:| :----:| 
| 王二狗   |grade | 2 |
| 李三熊   |grade | 2 |
| 王小芳   |grade | 1 |
| 王二狗   |score | 71|
| 李三熊   |score | 72|
| 王小芳   |score | 75|

现在，让我们来正式学习reshape2包的使用。

首先，依照日常习性，建立一个名称为miao的表格。`miao <- data.frame("person" = c( "王二狗", "李三熊", "王小芳"),"grade" = c(2, 2, 1), "score" = c(71, 72, 75))`建立表格的函数还记得咩?反正我是忘了,刚刚百度了一下建立的.这里没有采用老师所用的表格,因为我们要自力更生,举一反三(主要是我觉得还得去找老师的表格,懒)

*好气,刚刚不知道点了哪里,打了好大一段,全都删除了,这可是十一点多了啊,好气好气.来继续*

其次,reshape2包里包含了`melt函数`和`dcast函数`.

* melt函数可以将宽格式的数据改为长格式的数据.举个栗子,运用`miao2 <- melt(miao, id = "person")`函数,可以实现上述表格的转换.这个函数的意思是生成一个名称为miao2的表格，person是行变量（我不是很能分清楚行变量和列变量，看上图吧。。。）

* `dcast函数`是对数据进行还原,还原为数据框格式.(不过老师也没介绍怎么个还原法,暂时先不展开)老师介绍了下分类汇总的方式.举个栗子,`dcast(miao,score~grade, margins = c("score", "grade"))`就是算一下分数在各年级上的分布,顺便求一下行列的边缘和.

reshape2包的使用暂且先到这里结束.总体感觉还不错,除了一天也就学习一个安装包的那种惭愧感在心中盘旋.......
